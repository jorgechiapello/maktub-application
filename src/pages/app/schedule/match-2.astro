---
import MainLayout from '../../../layouts/AppMainLayout.astro';
import Calendar from '../../../components/Calendar.astro';
import LeftArrow from '../../../components/LeftArrow.astro';
import { crushes } from '../../../data/crushes';

const matchId = 2;
const match = crushes.find(m => m.id === matchId);

if (!match) {
  return new Response('', { status: 404 });
}
---

<MainLayout title={`Programar cita con ${match.name}`}>
  <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="mb-6">
      <LeftArrow href="/app" />
      <Calendar matchId={match.id} matchName={match.name} />
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const onboardingData = localStorage.getItem('profileAnswers');
      if (!onboardingData) {
        // No onboarding data found, redirect to onboarding
        window.location.href = '/app/onboarding';
        return;
      }
    });
  </script>
</MainLayout>
